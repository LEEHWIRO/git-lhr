--업데이트 쎄대여
UPDATE LPROD
SET    LPROD_NM = '향수'
WHERE  LPROD_GU = 'P102';

--등푸른생선 주세요
SELECT *
FROM LPROD
WHERE LPROD_GU = 'P202';

/*-------------------------------------------------
--P.시퀀스 보충
/*
 Sequence는 연속, 열거, 순서의 의미.
 Sequence객체는 자동적으로 번호를 생성하기 위한 객체. 
 Sequence객체는 테이블과 독립적이므로 여러 곳에서 사용가능.
 Sequence 를 이용하는 경우 
? Primary Key를 설정할 후보키가 없거나 PK를 특별히 의미 있게 
 만들지 않아도 되는 경우
? 자동으로 순서적인 번호가 필요한 경우
*/
--시퀀스 생성
--START WITH : 시작번호
--INCREMENT BY : 증감
CREATE SEQUENCE LPROD_SEQ --OR REPLACE 없음
INCREMENT BY 1
START WITH 1;

DROP SEQUENCE LPROD_SEQ;
  
--시퀀스 1증가
SELECT LPROD_SEQ.NEXTVAL FROM DUAL;

--현재번호 확인
SELECT LPROD_SEQ.CURRVAL FROM DUAL;
  
--사용방법
CREATE TABLE TESTSEQ(
  TS_ID   NUMBER NOT NULL ,
  TS_NAME VARCHAR2(10),
  CONSTRAINT PK_TESTSEQ PRIMARY KEY(TS_ID)
);

CREATE SEQUENCE TESTSEQ_SEQ
INCREMENT BY 1
START WITH 1;

SELECT * FROM USER_SEQUENCES;  

--ORA-08002: sequence TESTSEQ_SEQ.CURRVAL is not yet defined in this session
SELECT TESTSEQ_SEQ.CURRVAL FROM DUAL; --다음에 만들어야 만들어짐.//현재값

SELECT TESTSEQ_SEQ.NEXTVAL FROM DUAL; --먼저 만들고//증가

--1
SELECT TESTSEQ_SEQ.CURRVAL FROM DUAL;

INSERT INTO TESTSEQ(TS_ID, TS_NAME) 
VALUES(TESTSEQ_SEQ.NEXTVAL,'글1');

INSERT INTO TESTSEQ(TS_ID, TS_NAME) 
VALUES(TESTSEQ_SEQ.NEXTVAL,'글2');

INSERT INTO TESTSEQ(TS_ID, TS_NAME) 
VALUES(TESTSEQ_SEQ.NEXTVAL,'글3');
  
SELECT * FROM TESTSEQ;

commit;

--시퀀스 연습문제
--AOA 테이블 생성
--( NO NUMBER NOT NULL
--, NAME VARCHAR2(30)
--, BIR  VARCHAR2(20))
--NO컬럼을 PRIMARY KEY로 CONSTRAINT하기
CREATE TABLE AOA(
  NO NUMBER NOT NULL ,
  NAME VARCHAR2(30),
  BIR  VARCHAR2(20),
  CONSTRAINT PK_AOA PRIMARY KEY(NO)
);

CREATE SEQUENCE AOA_SEQ
INCREMENT BY 1
START WITH 1;

--시컨스를 사용하여 다음의 데이터를 입력
--1 지민, 1991-01-08 2, 초아 3, 설현 4, 유나 5, 혜정
INSERT INTO AOA(NO, NAME, BIR) 
VALUES(AOA_SEQ.NEXTVAL,'지민','1991-01-08');

INSERT INTO AOA(NO, NAME) 
VALUES(AOA_SEQ.NEXTVAL,'초아');

INSERT INTO AOA(NO, NAME) 
VALUES(AOA_SEQ.NEXTVAL,'설현');

INSERT INTO AOA(NO, NAME) 
VALUES(AOA_SEQ.NEXTVAL,'유나');

INSERT INTO AOA(NO, NAME) 
VALUES(AOA_SEQ.NEXTVAL,'혜정');

SELECT * FROM AOA; 

COMMIT;
 
DROP SEQUENCE AOA_SEQ;

DELETE FROM AOA
WHERE  NO = 5;

/*
Sequence 구문
   CREATE SEQUENCE sequence_name
	   [ START WITH  n ]
[ INCREMENT BY  n ]
[ MAXVALUE n | NOMAXVALUE ]
[ MINVALUE  n | NOMINVALUE ]
[ CYCLE | NOCYCLE ]
[ CACHE n | NOCACHE ]
[ ORDER | NOORDER ]

? Sequence가 사용되는 경우
  - SELECT문의 SELECT 절 (단, SUBQUERY, VIEW가 아닌)
  - INSERT 문의 SELECT 절
  - INSERT 문의 VALUES 절
  - UPDATE문의 SET 절

 ? Sequence가 제한되는 경우
   - SELECT, DELETE, UPDATE 에서의 서브쿼리

 - VIEW의  QUERY구문
   - DISTINCT 가 있는 SELECT 문
   - GROUP BY, ORDER BY 가 있는 SELECT 문
   - SET 연산자(UNION, INTERSECT, MINUS)가 있는 SELECT 문
   - SELECT 문의 WHERE 절
   - CREATE / ALTER TABLE 에서 컬럼의 DEFAULT 값
   - CHECK 제약조건
 */

 
